<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComboDataFilter</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif; 
            max-width: 1000px; margin: 0 auto; padding: 20px; background: #f8f9fa; 
        }
        .container { background: white; border-radius: 12px; padding: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
        h1 { color: #1a1a1a; margin-bottom: 5px; font-size: 28px; }
        .subtitle { color: #666; margin-bottom: 30px; font-size: 16px; }
        input[type="text"] { 
            width: 100%; padding: 16px; font-size: 16px; border: 2px solid #e1e5e9; 
            border-radius: 8px; margin-bottom: 20px; transition: border-color 0.2s; 
        }
        input:focus { border-color: #4f46e5; outline: none; box-shadow: 0 0 0 3px rgba(79,70,229,0.1); }
        textarea { 
            width: 100%; height: 300px; padding: 16px; font-family: 'Courier New', monospace; 
            font-size: 14px; line-height: 1.5; border: 2px solid #e1e5e9; border-radius: 8px; 
            margin-bottom: 20px; resize: vertical; background: #fafbfc;
        }
        .buttons { display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; }
        button { 
            padding: 14px 24px; font-size: 16px; font-weight: 500; border: none; border-radius: 8px; 
            cursor: pointer; transition: all 0.2s; flex: 1; min-width: 140px;
        }
        .btn-primary { background: linear-gradient(135deg, #4f46e5, #7c3aed); color: white; }
        .btn-primary:hover { transform: translateY(-1px); box-shadow: 0 8px 25px rgba(79,70,229,0.3); }
        .btn-secondary { background: #6b7280; color: white; }
        .btn-secondary:hover { background: #4b5563; }
        .btn-copy { background: #10b981; color: white; }
        .btn-copy:hover { background: #059669; }
        #output { 
            background: #f0f9ff; border: 2px solid #0ea5e9; border-radius: 8px; 
            min-height: 200px; padding: 20px; white-space: pre-wrap; font-family: 'Courier New', monospace; 
            font-size: 14px; line-height: 1.5; overflow: auto; max-height: 400px;
        }
        .stats { 
            background: linear-gradient(135deg, #10b981, #059669); color: white; 
            padding: 12px 20px; border-radius: 8px; font-weight: 600; font-size: 16px; 
            margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;
        }
        .loading { opacity: 0.7; pointer-events: none; }
        @media (max-width: 768px) { .container { padding: 20px; } .buttons { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Zeilen-Filter Pro</h1>
        <div class="subtitle">Keywords eingeben ‚Üí Text einf√ºgen ‚Üí Nur passende Zeilen behalten (Millionen Zeilen in Sekunden)</div>
        
        <input type="text" id="keywords" placeholder="Keywords (Komma-separiert): apple,banana,pineapple">
        <textarea id="input" placeholder="Deinen Text hier einf√ºgen (eine Zeile pro Account)..."></textarea>
        
        <div class="buttons">
            <button class="btn-primary" onclick="filterLines()">üîç Filter anwenden</button>
            <button class="btn-secondary" onclick="clearAll()">üóëÔ∏è Alles l√∂schen</button>
            <button class="btn-copy" onclick="copyOutput()">üìã Ergebnis kopieren</button>
        </div>
        
        <div class="stats" id="stats">0 / 0 Treffer (0%) ‚Äì Bereit</div>
        
        <div id="output">Gefilterte Zeilen erscheinen automatisch hier...</div>
    </div>

    <script>
        let isProcessing = false;
        
        function filterLines() {
            if (isProcessing) return;
            isProcessing = true;
            
            const keywordsInput = document.getElementById('keywords').value.trim();
            const inputText = document.getElementById('input').value;
            
            if (!keywordsInput) {
                alert('Bitte Keywords eingeben!');
                isProcessing = false;
                return;
            }
            
            // UI Feedback
            document.body.classList.add('loading');
            const statsEl = document.getElementById('stats');
            statsEl.textContent = 'üîÑ Verarbeite...';
            
            // Keywords parsen (Komma-separiert)
            const keywords = keywordsInput.toLowerCase().split(',').map(k => k.trim()).filter(Boolean);
            const lines = inputText.split('\n').filter(line => line.trim());
            const totalLines = lines.length;
            
            // Ultra-schnelles Filtern (native JS, keine Regex)
            const filtered = [];
            for (let i = 0; i < totalLines; i++) {
                const line = lines[i];
                const lowerLine = line.toLowerCase();
                for (let j = 0; j < keywords.length; j++) {
                    if (lowerLine.includes(keywords[j])) {
                        filtered.push(line);
                        break;
                    }
                }
            }
            
            // Ergebnis anzeigen
            document.getElementById('output').textContent = filtered.length ? filtered.join('\n') : 'Keine Treffer gefunden üòî';
            const percent = Math.round((filtered.length / totalLines) * 100) || 0;
            statsEl.textContent = `${filtered.length} / ${totalLines} Treffer (${percent}%) ‚Äì ${filtered.length ? '‚úÖ Fertig!' : '‚ùå Keine Matches'}`;
            
            document.body.classList.remove('loading');
            isProcessing = false;
        }
        
        function clearAll() {
            document.getElementById('keywords').value = '';
            document.getElementById('input').value = '';
            document.getElementById('output').textContent = '';
            document.getElementById('stats').textContent = '0 / 0 Treffer (0%) ‚Äì Bereit';
        }
        
        function copyOutput() {
            const output = document.getElementById('output').textContent;
            if (!output || output.includes('erscheinen')) return alert('Zuerst filtern!');
            
            navigator.clipboard.writeText(output).then(() => {
                const btn = event.target;
                const original = btn.textContent;
                btn.textContent = '‚úÖ Kopiert!';
                setTimeout(() => btn.textContent = original, 1500);
            });
        }
        
        // Hotkeys & Auto-Features
        document.getElementById('keywords').addEventListener('keypress', e => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                filterLines();
            }
        });
        
        document.getElementById('input').addEventListener('paste', () => {
            setTimeout(() => {
                if (document.getElementById('keywords').value.trim()) {
                    filterLines();
                }
            }, 50);
        });
        
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && e.key === 'Enter') filterLines();
        });
    </script>
</body>
</html>
